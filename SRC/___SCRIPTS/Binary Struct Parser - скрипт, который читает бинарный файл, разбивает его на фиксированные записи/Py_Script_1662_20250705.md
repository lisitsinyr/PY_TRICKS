Link: https://t.me/Py_Script/1662

–î–∞—Ç–∞: 2025-07-05 08:03:06+00:00

Title: Python_Scripts

üìÅ **Binary Struct Parser** ‚Äî —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–π
—Ñ–∞–π–ª, —Ä–∞–∑–±–∏–≤–∞–µ—Ç –µ–≥–æ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä,
5‚ÄØ—Ü–µ–ª—ã—Ö, 1‚ÄØ—á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π, —Å—Ç—Ä–æ–∫–∞ –¥–ª–∏–Ω–æ–π
255‚ÄØ–±–∞–π—Ç), –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç –ø–æ–ª—è –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ —É–¥–æ–±–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏
–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø–æ–¥—Ö–æ–¥–∞—Ö –∏–∑ StackOverflow –ø–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é struct.unpack() –≤ —Ü–∏–∫–ª–µ

üì± **Python** 3.8+
üíæ **–ú–æ–¥—É–ª–∏:** `struct` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞),
`memoryview`, `ctypes`

üìå Binary Struct Parser ‚Äî —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–π
—Ñ–∞–π–ª, —Ä–∞–∑–±–∏–≤–∞–µ—Ç –µ–≥–æ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä,
5‚ÄØ—Ü–µ–ª—ã—Ö, 1‚ÄØ—á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π, —Å—Ç—Ä–æ–∫–∞ –¥–ª–∏–Ω–æ–π
255‚ÄØ–±–∞–π—Ç), –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç –ø–æ–ª—è –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ —É–¥–æ–±–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏
–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø–æ–¥—Ö–æ–¥–∞—Ö –∏–∑ StackOverflow –ø–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é struct.unpack() –≤ —Ü–∏–∫–ª–µ

üë®‚Äçüíª **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```import struct
from functools import partial

FORMAT = '=5if255s'
struct_len = struct.calcsize(FORMAT)
struct_unpack = struct.Struct(FORMAT).unpack_from

def read_chunks(f, length):
    while True:
        chunk = f.read(length)
        if not chunk:
            break
        yield chunk

def parse_binary_file(filename):
    results = []
    with open(filename, 'rb') as f:
        for chunk in read_chunks(f, struct_len):
            year, a, b, c, d, pop, name_bytes =
struct_unpack(chunk)
            name = name_bytes.split(b'\0',
1)[0].decode('utf-8', errors='ignore')
            results.append({
                'year': year,
                'values': (a, b, c, d),
                'population': pop,
                'name': name
            })
    return results

if __name__ == '__main__':
    data = parse_binary_file('metro_areas.bin')
    for rec in data[:5]:
        print(rec)```

üìå –û—Å–Ω–æ–≤–∞ –º–µ—Ç–æ–¥–∞ ‚Äî struct.unpack() –≤ —Ü–∏–∫–ª–µ while, –∫–æ—Ç–æ—Ä—ã–π
–ø–æ–∫–∞ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞, ‚Äî —Å–∞–º—ã–π –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–±
—Ä–∞–∑–±–∏—Ä–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ –∑–∞–ø–∏—Å–∏

#—Å–∫—Ä–∏–ø—Ç—ã

üñ• [Python_Scripts](https://t.me/Py_Script)

